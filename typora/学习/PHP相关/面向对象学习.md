# 面向对象学习
## 面向对象七大原则
- 单一职责原则 SRP
    - 避免相同的职责分散到不同的类
    - 避免一个类承担太多职责
- 接口隔离原则 ISP
    - *客户端不应被强迫实现他们不会使用的接口*
    - 避免接口臃肿，接口拆分
    - 定制化提供服务，即 **按需服务**
    - 处理接口污染
        - 委托分离接口
        - 多继承分离接口
- 开放-闭合原则 OCP
    - open 模块的行为必须是开放的，支持扩展的
    - closed 在对模块进行扩展时，不应影响或大规模影响已有的模块
    
    > **即，对扩展开放，对更改关闭**
    实现该原则的核心是**面向抽象编程**，而不是面向具体编程，在设计方面应用**抽象** 和 **封装**的思想，系统功能实现方面用**面向接口编程**
- 里式替换原则 LSP
    > 子类必须能够替换掉他们的基类，并能出现在其基类出现的任何地方
    - 父类的方法都要在子类中实现或重写
    - 在客户端程序中只应该使用父类对象而不应该直接使用子类对象，这样可以实现**动态多态**
- 依赖倒置原则 DIP，是IOC（控制反转）的同义词
    - 上层模块不应该依赖于下层模块，它们共同依赖于一个抽象
    - 抽象不依赖于具体，具体要依赖于抽象
    
    > 依赖倒置的核心是解耦
- 合成复用原则
> 在复用时应优先考虑使用合成聚合而不是继承。尽量使用对象组合，而不是继承来达到复用的目的。
- 迪米特原则 （最小依赖原则）
> **原因：**一个类如果暴露太多私用的方法和字段，会让调用者很茫然。并且会给类造成不必要的判断代码。所以，我们使用尽量低的访问修饰符，让外界不知道我们的内部。这也是面向对象的基本思路。这是迪米特原则的一个特性，无法了解类更多的私有信息。
**核心：**一个对象应当对其他对象有尽可能少的了解，软件实体应当尽可能少的与其他实体发生相互作用。意思就是降低各个对象之间的耦合，要求尽量的封装，尽量的独立，尽量的使用低级别的访问修饰符以提高系统的可维护性。
**优点：**降低耦合度、增加稳定性

## 设计模式
### 单例模式
#### 三个特点
1. 一个类只能有一个实例
2. 它必须自行创建这个实例
3. 它必须自行向整个系统提供这个实例

```php
    class SingleTon()
    {
        private static $_instance = NULL;
        
        /**
          * 私有化默认构造方法，保证外界无法直接实例化
         */
        private function __construct()
        {
        }
        
        /**
          * 静态工厂方法，返还此类的唯一实例
         */
        private static function getInstance()
        {
            if(!$self::$_instance instanceof self){
                $self::$_instance = new SinglgTon();
                // 或者这样写
                // self::$_instance = new self();
            }
            return $self::$_instance;
        }
        
        public function __clone()
        {
            //禁止克隆
            die('Clone is not allowed.' . E_USER_ERROR);
        }
    }
```

#### 单例模式的优缺点
**优点：**
1. 改进系统的设计
2. 是对全局变量的一种改进

**缺点：**
1. 难于调试
2. 隐藏的依赖关系
3. 无法用错误类型的数据覆写一个单例
