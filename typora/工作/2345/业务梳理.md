# 业务梳理
## 业务梳理列表
- 梳理积分联盟执行流程，业务加载流程
- 积分后台执行流程，路由规则

## 问题及优化方案
- 代码结构中面向过程跟面向对象混用
    1. 代码拆分重构
    2. 规范编码
- redis加锁问题，部分加锁使用set方式
    1. 使用setnx代替
- 编码问题
    - 用use调用需要的类，少用\class全路径，更直观
    - 框架实现依赖注入功能，实现控制反转
    - service定位明确，只写不涉及model操作的业务逻辑
    - orm问题
        - 所有查询操作都用all(),性能浪费。_已修改_
        - 增加了updateByPk,updateByAttr方法
        - 批量修改时，当一次执行语句数过多，SQL语句拼接会出错
    - 代码重复太多，基本没用继承
    - 接口问题
        - 有的参数前端可以传的没有必要后端再查一遍