# 提现打款数据库设计文档
## 数据库表结构

```sql
CREATE TABLE `pull_new_withdraw` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL COMMENT '用户uid',
  `passid` int(11) unsigned NOT NULL,
  `username` varchar(100) NOT NULL DEFAULT '' COMMENT '用户名',
  `user_type` tinyint(2) NOT NULL COMMENT '用户类型,1 推广员 2 一级KA  3 二级KA',
  `trade_sn` varchar(105) NOT NULL DEFAULT '' COMMENT '唯一订单号',
  `payee_account` varchar(100) NOT NULL DEFAULT '' COMMENT '支付宝账户',
  `amount` decimal(10,2) NOT NULL COMMENT '提现金额（精确到2位小数）',
  `apply_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '申请时间',
  `check_status` tinyint(4) NOT NULL DEFAULT '1' COMMENT '状态（1.待审核 2.审核未通过 3.审核已通过 4.已取消 5.失败）',
  `operator` varchar(50) NOT NULL DEFAULT '' COMMENT '审核操作人',
  `check_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '审核时间',
  `check_id` int(11) NOT NULL DEFAULT '0' COMMENT '审核人ID',
  `remark` varchar(100) NOT NULL DEFAULT '' COMMENT '备注',
  `pay_center_status` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '支付中心打款状态 0-未处理 1-成功 2-失败',
  `hash_str` varchar(32) NOT NULL DEFAULT '' COMMENT '记录hash',
  `retries` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '失败重试次数',
  `ctime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '创建时间',
  `mtime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_trade_sn` (`trade_sn`),
  KEY `idx_uid` (`uid`)
) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=latin1 COMMENT='拉新提现订单表';



CREATE TABLE `pull_new_user_wallet` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL,
  `total_balance` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '总余额金额（精确到2位小数）',
  `profit_balance` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '结算收益金额（精确到2位小数）',
  `shop_balance` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '百万小店金额（精确到2位小数）',
  `freeze_balance` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '冻结金额（精确到2位小数）',
  `available_balance` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '可用金额（精确到2位小数）',
  `security_salt` varchar(64) DEFAULT '' COMMENT '余额校验值 md5($uid.$available_balance.$keys)',
  `ctime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '创建时间',
  `mtime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_uid` (`uid`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1629 DEFAULT CHARSET=latin1 COMMENT='用户钱包表';



CREATE TABLE `pull_new_user_balance_detail` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uid` bigint(20) unsigned NOT NULL,
  `balance_type` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '1-收入，2-支出',
  `amount` decimal(10,2) NOT NULL COMMENT '金额',
  `resource` varchar(128) NOT NULL DEFAULT '' COMMENT '来源备注 -其他 -xx拉新',
  `remark` varchar(128) NOT NULL DEFAULT '' COMMENT '备注-支付宝提现  -xx拉新数',
  `ctime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '创建时间',
  `mtime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '修改时间',
  PRIMARY KEY (`id`),
  KEY `idx_uid` (`uid`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=10582 DEFAULT CHARSET=latin1 COMMENT='拉新用户钱收支明细';
```